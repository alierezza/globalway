<%# binding.pry %>
  
  <%# binding.pry %>
  <%# binding.pry %>
    <div class="item">
    <div class="col-md-6">
      <h3>Production</h3>
      <strong>Line <%= big.first %></strong>
      <div>
        <canvas id="canvas_<%= big.first.to_s %>" height="450" width="600"></canvas>
        <span id="legendDiv_<%= big.first.to_s %>"></span>
      </div>
    </div>

    <div class="col-md-6">
      <h3>Defect</h3>
      <strong>Line <%= big.first %></strong>
      <div>
        <canvas id="canvas_def_<%= big.first.to_s %>" height="450" width="600"></canvas>
        <span id="legendDiv_def_<%= big.first.to_s %>"></span>
      </div>

    </div>
  </div>
  
  
<script>

$(function(){

  draw_graph()
  $('#myCarousel').on('slid.bs.carousel', function() {
    $("canvas").attr("width", "900").attr("height", "675")
    $("canvas").css("width", "900").css("height", "675")

    draw_graph()
    
  })
})


function draw_graph(){

  <%# @big_data.each_with_index do |big,index| %>
  
      var <%= "graph_" + big.first.to_s %> = {
          labels : ["07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00", "15:00", "16:00", "17:00", "18:00"],
          datasets : [
            {
              label: "Target",
              fillColor : "rgba(71,225,57,0.2)",
              strokeColor : "rgb(71,225,57)",
              pointColor : "rgba(71,225,57,1)",
              pointStrokeColor : "#fff",
              pointHighlightFill : "#fff",
              pointHighlightStroke : "rgba(220,220,220,1)",
              data : <%= big[1][0] %>
            },
            {
              label: "Actual",
              fillColor : "rgba(151,187,205,0.2)",
              strokeColor : "rgba(151,187,205,1)",
              pointColor : "rgba(151,187,205,1)",
              pointStrokeColor : "#fff",
              pointHighlightFill : "#fff",
              pointHighlightStroke : "rgba(151,187,205,1)",
              data : <%= big[1][1] %>
            }
          ]

        }

        var ctx = document.getElementById("canvas_<%= big.first.to_s %>").getContext("2d");
        window.myLine = new Chart(ctx).Line(<%= "graph_" + big.first.to_s %>, {
          responsive: true,
          animation : false,
          scaleShowHorizontalLines: true,
          legendTemplate : '<ul class="graph-legend">'
                        +'<li class="target">'
                        +'<span style="background-color: red"></span> Target'
                        +'</li>'
                        +'<li class="actual">'
                        +'<span style="background-color: red"></span> Actual'
                        +'</li>'

                  +'</ul>'
        });
        document.getElementById("legendDiv_<%= big.first.to_s %>").innerHTML = myLine.generateLegend();

        // defect

    var <%= "graph_def_" + big.first.to_s %> = {
          labels : ["07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00", "15:00", "16:00", "17:00", "18:00"],
          datasets : [
            {
              label: "Defect Internal",
              fillColor : "rgba(231,30,19,0.2)",
              strokeColor : "rgb(231,30,19)",
              pointColor : "rgba(231,30,19,1)",
              pointStrokeColor : "#fff",
              pointHighlightFill : "#fff",
              pointHighlightStroke : "rgba(220,220,220,1)",
              data : <%= big[1][2] %>
            },
            {
              label: "Defect External",
              fillColor : "rgba(176,176,176,0.2)",
              strokeColor : "rgba(176,176,176,1)",
              pointColor : "rgba(176,176,176,1)",
              pointStrokeColor : "#fff",
              pointHighlightFill : "#fff",
              pointHighlightStroke : "rgba(151,187,205,1)",
              data : <%= big[1][3] %>
            }
          ]

        }

        var ctx = document.getElementById("canvas_def_<%= big.first.to_s %>").getContext("2d");
        window.myLine = new Chart(ctx).Line(<%= "graph_def_" + big.first.to_s %>, {
          responsive: true,
          animation : false,
          scaleShowHorizontalLines: true,
          legendTemplate : '<ul class="graph-legend">'
                        +'<li class="target">'
                        +'<span style="background-color: red"></span> Target'
                        +'</li>'
                        +'<li class="actual">'
                        +'<span style="background-color: red"></span> Actual'
                        +'</li>'

                  +'</ul>'
        });
        document.getElementById("legendDiv_def_<%= big.first.to_s %>").innerHTML = myLine.generateLegend();



         <%# end %> // end big

}


</script>